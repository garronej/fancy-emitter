<input id="txt" />
<button id="activate">Activate</button>
<button id="deactivate">Dectivate</button>
<pre id="logs"></pre>

<script type="module">
    import SafeEmitter from './dist/src/SafeEmitter.js'

    const emitter = new SafeEmitter

    document.getElementById('activate').onclick = () => emitter.activate(document.getElementById('txt').value)
    document.getElementById('deactivate').onclick = () => emitter.deactivate(Error('stopped by user'))

    function log(data) {
        document.getElementById('logs').innerHTML += '\n' + data
    }

    async function start() {
        try {
            for await (const data of emitter)
                log(`>\t${data}`)
        } catch (error) {
            log(`ERR >\t${error}`)
        }
        log('DONE')
    }

    start()
</script>
